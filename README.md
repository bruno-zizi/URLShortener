# URL Shortener Tool

The URL Shortener Tool provides two primary functions: 

1.Given a complete URL, it returns a shortened URL. 

2 Given a shortened URL, it returns the complete URL.

Shortened URLs generated by the tool have an expiration time of N seconds, after which 
the link becomes invalid for the expand command. 

However, the original URL can be minified again. 

## How to Run  
### Method 1: Within the Project Directory  

```bash
python -m urlshortener --minify=http://example.com/lorem/ipsum?q=1 --expand=http://example.com/wD13sa`
```

### Method 2: Installing Package and Running it from the current Pip env

```bash
pip install .
```

```bash
urlshortener --minify=http://example.com/lorem/ipsum?q=1 --expand=http://example.com/wD13sa
```

### Method 3: Using Docker Compose

```bash
docker-compose run --rm url-shortener --minify=http://example.com/lorem/ipsum?q=1 --expand=http://example.com/wD13sa`
```


*Note:  methods 1 and 2 require an active MongoDB instance on port 27017. You can start one by running*
```bash
docker-compose up url-shortener-mongo
```

Changing the default Configuration
-----------------------

To change the configuration, update the relevant parameters in the `docker-compose.yaml` 
file or set the corresponding environment variables (.env).

### Configuration Parameters:

*   **Mongo URL:** `urlshortener_mongo_instance_url=mongodb://localhost:27017/`
*   **Mongo Collection Name:** `urlshortener_mongo_url_collection=urls`
*   **Mongo Database Name:** `urlshortener_database_name=urlshortener`
*   **Minified URL TTL (Time To Live):** `urlshortener_expiration_offset=50`
*   **Hashing Algorithm:** `urlshortener_shortening_algorithm=base-64` (other option: sha256)
*   **Fixed Domain (Optional):** `urlshortener_fixed_domain=http://example.com/`

Running Tests
-------------

### Method 1: Run Tests from Project Directory

```bash
python -m pytest
```
### Method 2: Run Tests with Docker

```bash
docker-compose up url-shortener-test
```


Verbose Mode
------------

To view debug logs, use the `-v` or `--verbose` flag when running the tool.
```bash
docker-compose run --rm url-shortener -v --minify=http://example.com/lorem/ipsum?q=1 --expand=http://example.com/wD13sa`
```